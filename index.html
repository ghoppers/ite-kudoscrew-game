<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Murder Mystery Game</title>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<style>
    body {
        font-family: Arial, sans-serif;
        text-align: center;
        background-color: #000000;
        /* background-image: linear-gradient(to bottom, #000080, #000000); */
        color: white;
    }
    #login-container {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        /* background-color: rgba(0, 0, 0, 0.4); */
        background-image: linear-gradient(to bottom, #000080, #000000);
    }
    #login-logo {
        margin-bottom: 20px;
    }
    #login-form {
        margin-bottom: 20px;
        max-width: 600px;
    }
    #game-container {
        max-width: 1000px;
        margin: 0 auto;
        padding: 20px;
        background-image: url('images/game_bg.jpg');
        background-size: contain;
        background-position: center;
        display: none;
    }
    #story {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
    }
    #question-container {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        background-color: rgba(255, 255, 255, 0.7); /* Add a semi-transparent white background */
    }
    #choices .btn {
        margin: 10px;
        padding: 10px 20px;
        font-size: 16px;
        cursor: pointer;
    }
    #score-history {
        margin-top: 20px;
        text-align: center;
    }
</style>
</head>
<body>
<div id="login-container">
    <div id="login-logo">
        <img src="images/logo.png" alt="Logo" style="max-width: 200px;">
    </div>
    <div id="login-form" class="mx-auto">
        <form>
            <div class="form-group">
                <label for="username" class="text-white">Username:</label>
                <input type="text" class="form-control" id="username" required>
            </div>
            <div class="form-group">
                <label for="password" class="text-white">Password:</label>
                <input type="password" class="form-control" id="password" required>
            </div>
            <button type="button" class="btn btn-primary" onclick="login()">Login</button>
        </form>
    </div>
</div>
<div id="game-container">
<div id="story" class="mt-4">
    <p>Welcome to "Murder at Ravenwood Manor." You are an esteemed detective invited to solve the mysterious death of 
        Lord Alexander Ravenwood, a wealthy aristocrat found dead in his study. As you delve into the investigation, 
        you uncover secrets, lies, and motives lurking within the manor's walls. Can you unravel the truth and bring the 
        perpetrator to justice?</p>
</div>

<div id="question-container" style="display: none;">
    <h1 class="mt-5" style="color: red; font-weight: bold;">Murder Mystery Game</h1>
    <div id="question" class="question-container mt-4 font-weight-bold" style="color: black; font-size: x-large;"></div>
    <div id="choices" class="mt-4" style="color: black;"></div>
    <div id="score-history" class="mt-4" style="color: black;"></div>
    <button id="new-game-btn" class="btn btn-primary mt-4" style="display: none; margin: 10px auto;" onclick="startNewGame()">Start New Game</button>
</div>
</div>

<script>
    const questions = [
        {
            question: "While examining the crime scene, do you:",
            choices: ["Focus on the broken window, suggesting an intruder.", "Pay attention to the overturned furniture, indicating a struggle."],
            answer: 1 // Index of correct answer in choices array
        },
        {
            question: "Questioning the suspects, you discover:",
            choices: ["Lady Eleanor had a heated argument with the victim.", "Butler James was seen near the study moments before the murder."],
            answer: 0
        },
        {
            question: "Reviewing the evidence, you find:",
            choices: ["A torn piece of fabric matching Lady Eleanor's dress.", "Fingerprint evidence pointing to Butler James."],
            answer: 1
        },
        {
            question: "Analyzing alibis, you learn:",
            choices: ["Lady Eleanor was attending a social event miles away.", "Butler James claims he was in the kitchen during the incident."],
            answer: 1
        },
        {
            question: "Finally, who do you accuse as the murderer?",
            choices: ["Lady Eleanor", "Butler James"],
            answer: 0
        }
    ];

    let currentQuestion = 0;
    let score = 0;
    let playerName = "";
    let scoreHistory = [];

    const questionElement = document.getElementById("question");
    const choicesElement = document.getElementById("choices");
    const scoreHistoryElement = document.getElementById("score-history");
    const newGameButton = document.getElementById("new-game-btn");

    function login() {
        const username = document.getElementById("username").value.trim();
        const password = document.getElementById("password").value.trim();
        // Simulated login logic - allow any non-empty username and password
        if (username !== "" && password !== "") {
            playerName = username;
            document.getElementById("login-container").style.display = "none"; // Hide the login container
            document.getElementById("game-container").style.display = "block"; // Display the story
            displayQuestion();
        } else {
            alert("Please enter both username and password.");
        }
    }

    function displayQuestion() {
        document.getElementById("question-container").style.display = "block"; // Display the question container
        if (currentQuestion < questions.length) {
            const question = questions[currentQuestion];
            questionElement.innerHTML = question.question;
            choicesElement.innerHTML = "";
            question.choices.forEach((choice, index) => {
                const button = document.createElement("button");
                button.textContent = choice;
                button.classList.add("btn", "btn-primary");
                button.onclick = () => checkAnswer(index);
                choicesElement.appendChild(button);
            });
        } else {
            endGame();
        }
    }

    function checkAnswer(choice) {
        if (choice === questions[currentQuestion].answer) {
            score += 5;
        }
        currentQuestion++;
        displayQuestion();
    }

    function endGame() {
        const playerScore = { name: playerName, score: score };
        scoreHistory.push(playerScore);
        scoreHistory.sort((a, b) => b.score - a.score); // Sort in descending order of score
        updateScoreHistory();
        questionElement.innerHTML = "Game Over";
        choicesElement.innerHTML = `<p>Your final score is: ${score}</p>`;
        newGameButton.style.display = "block";
    }

    function startNewGame() {
        currentQuestion = 0;
        score = 0;
        playerName = "";
        // scoreHistory = [];
        document.getElementById("username").value = "";
        document.getElementById("password").value = "";
        document.getElementById("login-container").style.display = "block";
        document.getElementById("game-container").style.display = "none"; // Hide the story
        // document.getElementById("question-container").style.display = "none"; // Hide the question container
        // document.getElementById("story").style.backgroundImage = "linear-gradient(to bottom, #000080, #000000)"; // Change background gradient
        questionElement.innerHTML = "";
        choicesElement.innerHTML = "";
        scoreHistoryElement.innerHTML = "";
        newGameButton.style.display = "none";
    }

    function updateScoreHistory() {
        scoreHistoryElement.innerHTML = "<h2>Score History</h2>";
        scoreHistory.forEach((entry, index) => {
            const scoreEntry = document.createElement("p");
            scoreEntry.textContent = `${index + 1}. ${entry.name}: ${entry.score}`;
            scoreHistoryElement.appendChild(scoreEntry);
        });
    }
</script>
</body>
</html>
