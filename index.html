<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Murder Mystery Game</title>
<style>
    body {
        font-family: Arial, sans-serif;
        text-align: center;
    }
    .container {
        max-width: 700px;
        margin: 0 auto;
        padding: 20px 20px;
        background-color: aquamarine;
        height: 500px;
    }
    
    button {
        margin: 10px;
        height: 100px;
        padding: 10px 20px;
        font-size: 16px;
        cursor: pointer;
        width: 45%;
    }

    button#new-game-btn, button#start-btn {
        margin: 10px auto;
    }
    button.a_choice {background-color: yellow;  }
    button.b_choice {background-color: lightgreen;  }
    #question p{
        margin: 20px 10px;
        font-size: larger;
        background-color: rgb(244, 181, 64);
        padding: 10px 20px;
        width: 91%;
    }

    #question p, button {
        animation: fadeIn 2s;
    }

    @keyframes fadeIn {
        0% { opacity: 0; }
        100% { opacity: 1; }
    }
</style>
</head>
<body>
<div class="container">
    <h1>Murder Mystery Game</h1>
    <p style="font-family: 'Times New Roman', Times, serif;">
        Welcome to "Murder at Ravenwood Manor." You are an esteemed detective invited to solve the mysterious death of 
        Lord Alexander Ravenwood, a wealthy aristocrat found dead in his study. As you delve into the investigation, 
        you uncover secrets, lies, and motives lurking within the manor's walls. Can you unravel the truth and bring the 
        perpetrator to justice?</p>
    <div id="player-info">
        <label for="player-name">Enter your name:</label>
        <input type="text" id="player-name"><br>
        <button id="start-btn" onclick="startGame()">Start Game</button>
    </div>
    <div id="question"></div>
    <div id="choices"></div>
    <div id="score-history"></div>
    <button id="new-game-btn" style="display: none;" onclick="startNewGame()">Start New Game</button>
</div>

<script>
    const questions = [
        {
            question: "While examining the crime scene, do you:",
            choices: ["Focus on the broken window, suggesting an intruder.", "Pay attention to the overturned furniture, indicating a struggle."],
            answer: 1 // Index of correct answer in choices array
        },
        {
            question: "Questioning the suspects, you discover:",
            choices: ["Lady Eleanor had a heated argument with the victim.", "Butler James was seen near the study moments before the murder."],
            answer: 0
        },
        {
            question: "Reviewing the evidence, you find:",
            choices: ["A torn piece of fabric matching Lady Eleanor's dress.", "Fingerprint evidence pointing to Butler James."],
            answer: 1
        },
        {
            question: "Analyzing alibis, you learn:",
            choices: ["Lady Eleanor was attending a social event miles away.", "Butler James claims he was in the kitchen during the incident."],
            answer: 1
        },
        {
            question: "Finally, who do you accuse as the murderer?",
            choices: ["Lady Eleanor", "Butler James"],
            answer: 0
        }
    ];

    let currentQuestion = 0;
    let score = 0;
    let playerName = "";
    let scoreHistory = [];

    const questionElement = document.getElementById("question");
    const choicesElement = document.getElementById("choices");
    const scoreHistoryElement = document.getElementById("score-history");
    const newGameButton = document.getElementById("new-game-btn");

    function startGame() {
        playerName = document.getElementById("player-name").value.trim();
        if (playerName !== "") {
            document.getElementById("player-info").style.display = "none";
            displayQuestion();
        } else {
            alert("Please enter your name.");
        }
    }

    function displayQuestion() {
        if (currentQuestion < questions.length) {
            const question = questions[currentQuestion];
            questionElement.innerHTML = "";
            p_tag = document.createElement("p");
            p_tag.textContent = question.question;
            questionElement.appendChild(p_tag);
            choicesElement.innerHTML = "";
            question.choices.forEach((choice, index) => {
                const button = document.createElement("button");
                button.textContent = choice;
                if(index == 0) 
                    button.className = "a_choice";
                else
                    button.className = "b_choice";
                button.onclick = () => checkAnswer(index);
                choicesElement.appendChild(button);
            });    
        } else {
            endGame();
        }
    }

    function checkAnswer(choice) {
        if (choice === questions[currentQuestion].answer) {
            score += 5;
        }
        currentQuestion++;
        displayQuestion();
    }

    function endGame() {
        const playerScore = { name: playerName, score: score };
        scoreHistory.push(playerScore);
        scoreHistory.sort((a, b) => b.score - a.score); // Sort in descending order of score
        updateScoreHistory();
        questionElement.textContent = "Game Over";
        choicesElement.innerHTML = `<p>Your final score is: ${score}</p>`;
        newGameButton.style.display = "block";
    }

    function startNewGame() {
        currentQuestion = 0;
        score = 0;
        playerName = "";
        document.getElementById("player-name").value = "";
        document.getElementById("player-info").style.display = "block";
        questionElement.innerHTML = "";
        choicesElement.innerHTML = "";
        scoreHistoryElement.innerHTML = "";
        newGameButton.style.display = "none";
    }

    function updateScoreHistory() {
        scoreHistoryElement.innerHTML = "<h2>Score History</h2>";
        scoreHistory.forEach((entry, index) => {
            const scoreEntry = document.createElement("p");
            scoreEntry.textContent = `${index + 1}. ${entry.name}: ${entry.score}`;
            scoreHistoryElement.appendChild(scoreEntry);
        });
    }

</script>
</body>
</html>
